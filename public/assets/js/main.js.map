{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// CONTROLES\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst searchButton = document.getElementById('searchButton');\n\n// DATOS DE PARTIDA\nconst urlShowSearchByName = 'http://api.tvmaze.com/search/shows?';\nconst urlShowSearchById = 'http://api.tvmaze.com/shows/';\n\n// RESULTADOS\nconst searchResultsIntro = document.getElementById('searchResultsIntro');\nconst searchResultsList = document.getElementById('searchResultsList');\nconst favList = document.getElementById('favList');\n\nlet searchResultShows = null; // constante preparada para recibir resultados del servidor\nlet favShows = []; // constante preparada para recibir elementos añadidos con push\n\n\n// ACCIONES ****************************************************************************************\nfunction addFavToPannel (newFav) {\n  //LI\n  const favCard = document.createElement('li');\n  favCard.id = newFav.id + 'FAV';\n  favCard.classList.add('aside__favList--card')\n  favList.appendChild(favCard);\n  //TITLE\n  const favTitle = document.createElement('p');\n  favTitle.classList.add('aside__favList--title')\n  favCard.appendChild(favTitle);\n  const favTitleContent = document.createTextNode(newFav.name);\n  favTitle.appendChild(favTitleContent);\n  //IMAGE\n  const favImage = document.createElement('img');\n  const imageSource = newFav.image !== null ? newFav.image.medium : 'https://via.placeholder.com/210x295?text=TV';\n  favImage.classList.add('aside__favList--image')\n  favImage.src = imageSource;\n  favCard.appendChild(favImage);\n};\n\nfunction getFavInfo (id) {\n  fetch(urlShowSearchById + id)\n  .then(function(response) {\n    if (!response.ok) {throw response;}\n    return response.json();\n  })\n  .then(function(data) {\n    let newFav = data; \n    addFavToPannel(newFav)\n  })\n  .catch(error => console.log(`Ha sucedido un error: ${error}`));\n\n};\nfunction addFavourite (id) {\n  if (parseInt(favShows.indexOf(id)) === (-1)) {\n    favShows.push(id);\n    getFavInfo(id);\n    } else {\n      console.log('ya está en favoritos')\n    }\n};\n\nfunction changeCardStyle (id) {\n  document.getElementById(id).classList.add('main__favShowStyle');\n}\n\nfunction renderSearchResultShows (show) {\n  //LI\n  const resultCard = document.createElement('li');\n  resultCard.id = show.show.id;\n  if (parseInt(favShows.indexOf(resultCard.id)) !== (-1)) {\n    resultCard.classList.add('main__favShowStyle')\n  } \n  resultCard.classList.add('main__resultsList--card')\n  searchResultsList.appendChild(resultCard);\n  //TITLE\n  const resultCardTitle = document.createElement('p');\n  resultCard.appendChild(resultCardTitle);\n  const resultCardTitleContent = document.createTextNode(show.show.name);\n  resultCardTitle.appendChild(resultCardTitleContent);\n  //IMAGE\n  const resultCardImage = document.createElement('img');\n  const imageSource = show.show.image !== null ? show.show.image.medium : 'https://via.placeholder.com/210x295?text=TV';\n  resultCardImage.src = imageSource;\n  resultCard.appendChild(resultCardImage);\n  // make card react on clicks\n  resultCard.addEventListener('click', function(){addFavourite(resultCard.id); changeCardStyle(resultCard.id)});\n}\n\n\nfunction countResults (count, text) {\n  searchResultsIntro.innerHTML = '';\n  const searchResultsIntroContent = document.createTextNode(\n    `Estos son los ${count} resultados más populares que contienen \"${text}\"`\n  );\n  searchResultsIntro.appendChild(searchResultsIntroContent);\n}\n\n\nfunction showSearchByName () {\n    let query = searchInput.value;\n    fetch(`${urlShowSearchByName}q=${query}`)\n    .then(function(response) {\n      if (!response.ok) {throw response;}\n      return response.json();\n    })\n    .then(function(data) {\n      searchResultShows = data;  //******************************** <---- para ver más páginas: acumulador\n      countResults(searchResultShows.length, query);  // Ejecutamos el contador 1 vez\n      for (let show of searchResultShows){\n        renderSearchResultShows(show);                // Ejecutamos el renderizador en bucle, por resultado\n      }\n    })\n    .catch(error => console.log(`Ha sucedido un error: ${error}`));\n};\n\n\n\nfunction handleSearchButton (event) {\n  event.preventDefault();\n  searchResultsList.innerHTML = '';\n  showSearchByName();\n  searchForm.reset();\n}\n\nsearchButton.addEventListener('click', handleSearchButton);\n\n/*\n\n*/\n"]}